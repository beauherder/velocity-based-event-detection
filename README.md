# velocity-based-event-detection
This page includes an algorithm (suitable for R) for velocity-based event detection, which can be used to detect saccades in webcam-based eye-tracking data. 
Initially, this algorithm was developed as part of my Master's thesis, which focused on comparing the data quality and saccade and gaze pattern detection capabilities of webcam-based eye-tracking and dedicated eye-tracking systems. In the description below and the abstract page, provide more background information that should help determine whether this algorithm would be of assistance. 
Special thanks to my thesis supervisor Ellen Kok and Thesis buddy Lonneke Elders. 

This algorithm is made available to eye-tracking researchers who utilize webcams for research purposes, supporting the expansion of webcam use in educational research. It could also be applied in other research fields. Currently, saccade detection is possible in webcam-based eye-tracking; however, a functional algorithm is lacking. Additionally, it remains to be confirmed what the limitations are in terms of saccade detection resolution in webcam data. This study investigated whether saccade detection using a velocity-based event detection algorithm was feasible and identified its limitations in terms of size. 

The study examined data quality, saccade detection, and gaze pattern recognition in webcam-based eye-tracking data. The study was conducted in a laboratory, using a webcam (Logitech, 30 Hz), a Tobii Pro Spectrum Eye tracker (300 Hz) without a chin rest, and a monitor with a resolution of 1920 x 1080 pixels at a distance of 60 cm from the participant. The algorithm was designed to detect saccades in webcam-based eye-tracking data collected using the Gorilla platform and Experiment Builder 2. 
In terms of data quality, the webcam performed reasonably well, with decent accuracy (1.68 degrees), but lower precision (SD: 1.79 degrees). The sampling rate appeared suitable for another task but yielded some unexpected values during the prosaccade task (68.58 Hz), likely due to the way samples were processed. The webcam operated on 30 Hz, and the Gorilla Task Builder 2 at 60 Hz. This could result in the platform interpreting the same webcam sample twice, potentially yielding two different results from the Gorilla algorithm. Still, for a webcam, performance was acceptable, but clearly not up to lab standards.

The code was tested using a task that elicited a single saccade, a prosaccade task, to determine if it can detect a single saccade and what size saccade it can detect. Each trial consisted of a red dot, visible for 2 seconds, at the corners of an invisible rectangle, followed by the appearance of a black dot for 500 ms. For vertical saccades, the dot appeared 714 px (21.88 DVA) left or right of the red dot; for horizontal saccades, the dot appeared at 837 px (26.47 DVA) below or above the red dot. This task consisted of 8 trials to cover all routes over a large rectangle twice, accounting for data loss due to eye wandering. This was followed by a similar sequence of 8 trials for a smaller rectangle of 278 px horizontally (7.49 DVA) and 137 px vertically (3.52 DVA), to investigate the detection of smaller saccades. 
The algorithm is based on the method for velocity-based event detection as described by Holmqvist et al. (2011). It utilizes the distance over time to determine whether a sample is part of a saccade. It first sets a suspected threshold (usually between 30-100 Â°/s, based on an inspection of the raw data), then uses the x/y coordinates and velocity of samples in the raw data to  estimate a starting point for the threshold. This is followed by an inspection of the gaze plots and x/y-over-time plots to determine if the threshold is correct or needs to be adjusted. Repeat this process to determine the optimal threshold for detecting saccades that fits the data the algorithm will be applied to. 
The results of this study indicated that velocity-based event detection is possible in eye-tracking data collected using a webcam. Horizontal saccades are detected reliably at both stimulus sizes. Vertical saccades can be detected reliably for the larger stimulus size, but saccade detection is inconsistent for the smaller stimulus size. 
In conclusion, the algorithm reliably detects horizontal saccades but can be inconsistent for vertical saccades, depending on their size. 
