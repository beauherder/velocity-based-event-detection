# velocity-based-event-detection
This page includes an algorithm (suitable for R) for velocity-based event detection that can be used for detecting saccades in webcam-based eye-tracking data. 

This algorithm is made available for eye-tracking researchers who utilize webcams for research purposes to support the expansion of the use of webcams in educational research, but could be used in other research fields as well. Currently, saccade detection seems possible in webcam-based eye-tracking, but a functional algorithm seems to be missing. Additionally, it remains to be comfirmed what the limitations are in terms of resolution of saccade detection in webcam data. This study examined if saccade detection using a velocity-based event detection algorithm was possible and what the limitations were in terms of size. 

The study examined data quality, saccade detection and gaze pattern recognition in webcam-based eye-tracking data. The study was conducted in a lab, using a webcam (Logitec, 30 Hz), a Tobii Pro Spectrum Eye tracker (300Hz) without a chin-rest, and a monitor with a resolution of 1920 x 1080 pixels at a distance of 60 cm for the participant. The algorithm was created to detect saccades in webcam-based eye-tracking data collected using the Gorlla platform, Experiment Builder 2. 
In terms of data quality, the webcam perfomed reasonably well, with decent accuracy (1.68 dergees), but lower precision (SD: 1.79 degrees). The sampling rate looked fine for another task, but showed some unexpected values during the prosaccade task (68.58 Hz), probably due to how samples where processed. The webcam operated on 30 Hz and the Gorilla Task builder 2 on 60 Hz. This could result in the platform interpreting the same webcam sample twice, which could also result in two different results by the Gorilla algorithm. Still, for a webcam, performance was acceptable, but clearly not up to lab standards.

The code was tested using a task that elicited a single saccade, a prosaccade task, in order to determine if it can detect a single saccade and what size saccade can be detected. Each trial consisted of a red dot, visible for 2 seconds, at the corners of an invisible rectangle, followed by the appearance of a black dot for 500 ms. For vertical saccades, the dot appeared 714 px (21.88 (DVA)) left or right of the red dot; for horizontal saccades, the dot appeared at 837 px (26.47 DVA) below or above the red dot. This task consisted of 8 trials to cover all routes over a large rectangle twice, accounting for data loss due to eye wandering. This was followed by a similar sequence of 8 trials for a smaller rectangle of 278 px horizontally (7.49 DVA) and 137 px vertically (3.52 DVA), to investigate the detection of smaller saccades. 
The algorithm is based on the method for velocity-based event detection as described by Holmqvist et al. (2011) and uses the distance over time to determine wether or not a sample is part of a saccade. It describes first using the x/y coordinates and velocity of samples in the raw data to  estimate a starting point for the threshold. Then, using the initial threshold, the accompanying gaze plots and x/y-over-time plots are examined to determine at what value the threshold should be set, which should exclude noise in the data. Repeat this to determine the optimal threshold for detecting saccades that fits the data the algorithm will be used for. 
The results of this study indicated that velocity-based event detection is possible in eye-tracking data collected using a webcam. Horizontal saccades are detected reliably at both stimuli sizes, vertical saccades can be detected reliably for the larger size stimulus, but saccade detection is inconsistent for the smaller size stimulus. 
In conclusion, the algorithm detects horizontal saccades reliably, but can be incosistent for vertical saccades depending on their size. 
